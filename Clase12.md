(75) Clase 13 2024 09 03 - YouTube
https://www.youtube.com/watch?v=AXywWzDUnoA

Transcript:
(00:04) pesadito Sí yo pues bien No creo que este semestre no tan pesado como otros Sí sí va a estar Alex se supone que tiene que entrar todos modos hoy voy a empezar yo pero
(01:13) nada más para ver un ejemplo para terminar la clase anterior y hoy con él van a ver asincronía según yo a lo que van a ver y después Ya les hice su aplicación de Pokémon para que la veamos y también la tarea va a ser de la aplicación de Pokémon y se las explico supone que se va a subir a las 3 la tarea para que la vean no sé si tengen alguna
(02:23) duda Ah de algo Sí estará un poco difícil esta vez por eso les vamos a dar más tiempo y también por eso se las voy a explicar Qué vamos a hacer en el Front end en los proyectos A qué te refieres con a las del framework cuánto tiempo
(03:27) será pues no estoy viendo si dejarles más o menos hasta el jueves de la próxima semana o si no el fin de semana El framework Bueno vamos a usar jango este lo cual lo vamos a ver se supone que ya la próxima semana y les vamos a dar nociones de python y tamb pues les vamos a enseñar que esango no la instalación y todo eso ya la próxima semana al final de la clase les muestro la tarea de todos modos como les comentaba se sube como a las 3 para que la vean si quieren Pero si se las voy a explicar
(04:57) est Ay igual este subimos el material un poco tarde es que estamos ocupados pero todos modos según yo se grabó bien la clase y todo se ve bien y lo subí al Drive todo Subí las grabaciones tanto de Alex como la mía y también los códigos los sub ahí no sé si puedan verlo todos si no pues me dicen si no pueden verlo Qué onda chicos Buenas tardes cómo están chicos chicas Hola empezamos en 2 minutos va va va Cómo Perdón chavos me sacó Así que si alguien
(06:59) cont Mi pregunta no los escuché no se escuchó tu pregunta creo peroa que era yo cómo se han sentido en la clase chicos qué tal han sentido las tareas han sido dos pero cómo las han sentido han estado bonitas vientos vientos me alegra Bueno ya empezar a grabar bueno primero voy a empezar a transmitir porque s listo Bueno pues vamos a
(08:18) empezar y les voy a decir que es fch porque en eso nos quedamos la clase pasada y bueno en s Api es una interfaz moderna que sirve para realizar solicitudes http y lo que hace es utilizar promesas Y esto es para manejar las operaciones asíncronas y la ventaja es que es más simple y legible que HM http request y bueno Cuáles son las ventajas de fch appi sobre xml http request y bueno en si es que usa promesas no Entonces esto simplifica el manejo de operaciones asíncronas también tiene una sintaxis más limpia O sea que va a ser más fácil
(09:17) de leer y de escribir y pues es más flexible no Porque e el manejo de flujos de trabajo complejo complejos y encadenamiento pues es más flexible no en sí es es mejor usar fch appi ya que pues es más moderno no algo que también eh hace el chapi es el manejo de errores y bueno es lo que hace es que no considera un error de red como una falla en la conexión como un error en la promesa En lugar de eso lo que hace Es que la promesa solo se rechaza si realmente ocurre un fallo en la solicitud como una red no disponible o un malformado cors
(10:10) entonces para verificar el éxito de la solicitud lo que se necesita es revisar la propiedad Ok que ya habíamos visto antes de la respuesta entonces lo que hace es obligar a manejar los errores http Pues de una manera más explícita ahora Bueno vamos a ver El ejemplo de esto ya hice aquí este un documento html le puse Aquí el título que es ejecutar código fch Api este enviar datos a un Api y lo que hice fue un botón para enviar los datos entonces Bueno vamos a empezar definiendo una función e esta función se va a llamar
(11:01) no sé enviar datos por ejemplo y bueno qué va a hacer esta esta función pues se va a encargar de enviar datos a una app pública vamos a seguir usando en este caso la de Jason este y bueno vamos a usar el método htt post mediante la fch appi y en esta función pues vamos a realizar la solitud no Entonces para esto Vamos a ponerle fch y vamos a ponerle aquí lo que es nuestra URL tengo [Aplausos]
(12:16) me equivoqué si lo bien entonces e la función fch lo que hace es realizar la solicitud http a esta URL que estamos especificando entonces aquí adentro vamos a poner el método qué va a ser post Alguien me puede recordar Cuál es este método post qué es lo que hace enviar datos Sí exactamente enviar datos ahora headers bien en en Head alguien se acuerda que iba
(13:22) cómo era lo vimos la clase pasada igual en Me parece que en postman viene una opción para para ver justamente eso para modificarlo exactamente content type lo que va entonces headers Vamos a ponerle aquí content content type Y en este caso tenemos pues este una aplicación Jon Aquí vamos a [Música] ponerle ahora acá abajo lo que vamos a
(14:29) poner es el body y bueno en el body vamos a poner Jason eh Jason strang fy significa que bueno los contienen los datos que se van a enviar en la solicitud no Entonces estos datos se van a convertir en una cadena json usando esto de aquí que se van a estar enviando tres valores que van a ser los siguientes Ah que son el título que va a ser no sé por ejemplo Hola el cuerpo que va a ser Y por último el user ID
(15:36) uno listo ahora después vamos a procesar la respuesta de la Api para esto vamos a hacer que la función fch devuelva una promesa que se va a resolver cuando se recibe una respuesta del servidor entonces aquí Vamos a ponerle respon responda entonces aquí es respon Jon y va a convertir la respuesta en Jason es lo que hac que nada y después
(16:47) Data consol log y dat Alguien sabe que hace esto de aquí nadie bueno en sí Lo que hace este bloque es manejar el objeto Jason resultante de la conversión lo que hace justamente con el conso log es imprimir en la consola Pues con esto no y lo que hace pues es visualizar los datos que fueron enviados y la respuesta del servidor más que nada es eso ahora vamos a ver la parte de el manejo de errores que es con c y vamos a poner error
(17:56) conso error y Aquí vamos a ponerle error coma error listo Entonces qué va a hacer esto pues capturar cualquier error que pueda ocurrir durante la solicitud o el procesamiento de la respuesta Entonces si ocurre un error lo que va a hacer es que se va a imprimir en la consola mensaje no error y el detalle y ya por último vamos a llamar a la función enviar datos Y ya está vamos a guardar y ahora sí vamos a cargarla entonces aquí tenemos nuestra aplicación vamos a la
(19:00) Hola y se supone que si le damos aquí debería de enviarse pero no se envía no sé por qué ah segú y se lo puse si me equivoqué en algo dejen veo la función Aquí está bien por el método posters J que que haciendo recursivo No en el 16 invocas la función y se vuel a llamar o se en tu código
(20:03) Ah entonces más bien tenías que invocarla fuera no en algún otro evento se supone que sí tiene que servir pero creo que me estoy equivocando en algo de aquí bueno es que se está cargando no sé si es esto a ver la voy a volver a poner aquí Ay a ver pero si está bien content según yo debería de
(21:25) cargar yo creo que no porque porque falta un caso base hay una función recursiva no llamada recursiva en la 16 pero no hay un caso base en el que pueda salir No no sé si sea recursiva la función pero pero eso es lo que está lupea sí Deja veo eso Porque según yo a ver si la regreso necesit el que tenía antes así Creo que ya no s por se tarda tanto en cargar esto
(22:33) pero si ti razón cre es ya justamente er eso Perdón es que lo iba a mostrar en la consola de de aquí por eso tenía la la bueno estaba llamando la función y justamente pero ya y bueno si se dan cuenta como vimos en la clase pasada este pues nos da esto no O sea lo lo mismo que vimos en postman y con xml Pero la verdad es que se ve más bonito y es para no estar recargando la página también o sea es más que nada la lo que vamos a usar es lo más moderno digámoslo así pero es es prácticamente lo mismo si se dan cuenta
(23:32) en este caso estamos estamos usando no pero es prácticamente lo mismo y pues ya no sé si hayuna duda de esto Sino para ya pasar con Alex Okay si todo está bien pues ya Porque lo estaba metiendo discúlpenme Bueno pues Entonces pasamos con al Hola chicos den un segundito tero lam no tard nada un minutito efectivamente lo explotan mucho
(25:02) Bueno ya ya regresé chicos Perdón perdón Déjenme pongo la presentación A ver vamos a buscar nuestra parte de programación asíncrona a ver presentar [Música] primero vamos pantalla pantalla completa compartir compartir Okay Vamos a repasar antes no sé si se acuerdan Alguien me puede Ay qué hice presentar Ah presentar Alguien me puede decir qué es la programación asíncrona No nadie sabe que es la programación asíncrona ya ten quear mis pantallas son
(26:21) trabajos pendientes que pides esperar Ándale es una buena definición pero programación asíncrona es un paradigma de programación es una manera de programar donde no necesitas esperar a que este una tarea termine para poder realizar otra o sea se puedes hacer dos tareas simultáneamente va o en su defecto puedes continuar con el flujo de la aplicación e sin que alguna tarea lo detenga no detenga ese flujo y justo esa es eso es lo que conocemos como programación asíncrona la definición que tenemos aquí en las notas
(27:02) es es un paradigma de programación que permite que varias tareas se Ejecutan al mismo tiempo de manera no bloqueante es decir que si dos tareas independientes se deben ejecutar la segunda se puede ejecutar sin necesidad de terminar la primera va Qué maneras tenemos en javascript en javascript tenemos Tres formas los callbacks las promesas y ainca weit ainca weit esas son nuestras tres maneras la primera los callbacks son funciones que se llaman a sí mismas Que bueno que se pasan como argumentos va y se Ejecutan después de que una operación
(27:40) asíncrona se haya completado esta forma es pues está la neta muy chafa porque pues ni siquiera ni siquiera es asincronía como tal No porque pues necesitas que una se termine para completar la otra Nada más que pues puedes hacer cosas como darles un tiempo de espera etcétera no Entonces está la verdad como que muy chafa por eso esta nosotros no la vamos a ver y nos vamos a brincar a las dos más importantes que son las promesas y a ca wit promesas es el corazón de la sincronía Por qué Porque lo necesitamos para swit qué es
(28:14) una promesa Alguien me puede decir si se acuerdan de la clase pasada Qué es una promesa chicos algo que pasará exactamente Es algo que pasará una respuesta que esperas obtener Exacto también un corazón roto una promesa es un anillo no de compromiso no es el es el que das antes del de compromiso Este sí una una promesa es un objeto que representa la finalización exitosa o fallida de una operación asíncrona o sea eventualmente va a terminar tu operación asíncrona a operación asíncrona Llámale una llamada una Api Llámale una operación muy larga
(29:15) con muchos números algo que tome mucho tiempo eventualmente esa operación va a terminar y solo puede terminar de dos formas o tiene éxito o falla si tiene éxito qu hacemos Cómo respondemos Y si falla Cómo respondemos y como queremos hacerlo de manera no bloqueante entonces eh si falla o sea en caso exitoso seguimos el flujo de la aplicación como normalmente es pero si falla tenemos que responder de alguna manera sin romper el flujo entonces en cualquiera de los dos casos Tenemos que continuar con el flujo de nuestra
(29:51) aplicación eh esta pues es una forma mucho más sencilla que los callbacks vamos a ver que es es muy estructurada y es muy fácil de memorizar va cómo se crea una promesa Ah ah no antes de eso vamos a ver los estados de una promesa eh tenemos tres estados si ya se ejecutó entonces pasa al estado dep pendiente Ese es el primer estado cuando aún no termina su ejecución cuando ya inició pero aú no termina su ejecución y los otros dos son cumplidas exitosamente o rechazada donde falló nuestra promesa no pero en ambos casos son estados de
(30:38) que ya finalizó la promesa alguien tiene una duda hasta aquí de los estados o de qué es una promesa no va Vámonos re muy bien las promesas vamos dividir en dos partes lo primero cómo crearlas y lo segundo Cómo consumirlas nosotros lo vamos a ver con el orden un poco alterado pero A mi parecer es mucho más sencillo aprenderlo así tenemos solamente Tres formas de consumir una promesa lo queé hacer en caso de éxito lo queé hacer en caso de error y lo queé hacer siempre sin importar lo que pase si fue exitoso o fue erróneo vamos a a ejecutar una
(31:29) acción siempre que pase Y eso es las tres posibilidades tenemos de tres sopas y se acabó lo primero es punto den o sea ejecutamos una operación asíncrona Normalmente se llaman como funciones entonces aquí yo le puse operación asíncrona que estoy llamando a una función punto den y el flujo que quiero que haga en caso de que la respuesta sea exitosa lo segundo es punto Catch y además fíjense Cómo van en orden then es una función punto den es una función y como parámetro digamos le estoy mandando una función flecha que ejecuta un un código
(32:16) Sí luego Catch punto Catch también es una función o bueno podría ser más bien un método acuérdense que esto esto a final de cuentas esta función es un prototipo no entonces tiene estos métodos el método punto den el método punto Catch y el método Punto Final entonces punto Catch y como argumento le estoy pasando una función flecha que cree el flujo en caso de error Y por último punto Finally que como argumento le voy a pasar el flujo que quiero que se ejecute Sí o sí sin importar lo que sea que pase si fue exitoso o fue error este punto fin se va
(32:59) a ejecutar forzosamente de acuerdo muy bien Ahora eso es cómo consumir una promesa alguien tiene una duda de cómo se consumen las promesas no va va va va bueno para crear una promesa las promesas son objetos y como objetos le podemos definir lo que nosotros querramos entonces para hacerla vamos a utilizar la Sub constructor que se llama promise y para instanciar vamos a utilizar la notación de programación orientada a objetos va Entonces vamos a hacer una constante que le podemos llamar como nosotros queramos en mi caso
(33:48) le puse mi promesa vamos a crear una nueva instancia de el constructor promise que le tenemos que pasar sí o sí este estos dos argumentos bueno estos dos cómo se llaman propiedades que son funciones resolve y reject estas son funciones Okay muy bien son funciones y después una función flecha o podemos hacerlo nosotros queramos tampoco es necesario que sea una función flecha y dentro de nuestra función este le pasamos el flujo de nuestra promesa por ejemplo en mi caso siempre esta esta siempre va a ser exitosa porque aquí yo
(34:34) le estoy diciendo que éxito es true Estoy simulando aquí mi mi estado de la promesa Bueno mi respuesta de la promesa si es éxito entonces utiliza la función que me pasaste por parámetro y dime qué quieres que haga dentro de resolve también les podemos pasar funciones flecha o en este caso Yo le paso un mensaje va y dice operación completada exitosamente y en otro caso rechaza La promesa y solo Dame este error dentro de esto podemos darle nosotros algún flujo o alguna respuesta va se sienten listos para hacer algún
(35:17) ejemplo alguien tiene alguna duda Gracias parámetros no se sienten listos Bueno vamos a hacer una va s vamos a hacerla con fetch appi de acuerdo Alguien me puede decir vamos a hacer primero una función A ver vamos a hacer un nuevo documento Ajá vamos a hacer uno documento puntes Vamos a ponerle ejemplos promesas vamos a hacer una función que vamos a decirle que se llame llama Lama va a esta función simplemente le vamos a pasar una URL por parámetro y Alguien me puede decir ya que ya vieron su
(36:22) este no no les digas la respuesta Alguien me puede deciro puedo la URL que estoy pasando por parámetro utilizando Por ejemplo si quisiéramos guardar la respuesta de fch en una constante podamos hacer resp y no la respuesta alguien me dice tenemos que escribir ahí quiero utilizar para llamar a la URL que me están pasando por parámetro nada nadie ni por un punto extra y se la creyó el marco a wiit fetch Ajá también funciona pero aún no llegamos a a eso no a aún estamos viendo a wit entonces aquí solamente
(37:26) ponemos y y nuestra URL y ya es todo No ahora esto Esta este fetch qué creen que nos regresa qué nos qué nos devuelve fetch nos devuelve una promesa no Exacto justo ezequel Muchas gracias Nos devuelve una promesa Y entonces qué hacemos con las promesas las qué las consumimos no no sé si se acuerdan acá nos dijeron cómo podíamos consumir una promesa tenemos Tres formas den Catch y Finally entonces hacemos punto den Y qué vamos a hacer con nuestra respuesta Bueno pues podemos simplemente console.
(38:22) log e imprimir la respuesta o podemos hacer este no sé qué podríamos hacer con nuestra respuesta la podemos cambiar no respon es igual [Música] a respuesta exitosa y le podemos hacer los cambios que querramos o sea supongamos imagínense que nuestra respuesta es un campo numérico Y entonces queremos hacerle transformaciones a ese número no por ejemplo multiplicarlo por dos o sacarle el logaritmo o qué s yo puede ser tan complejo como su caso de uso en este caso Simplemente nos interesa transformar nuestra respuesta cambiarla
(39:09) por un String y que este nos diga respuesta exitosa y punto no va Ah qué otra cosa podemos hacer además de utilizar den y además esto es función flecha entonces va entre s aquí lo dice no lo digo yo lo dice la ciencia punto Catch Exacto Entonces además podemos ponerle un punto Catch y pasarle como parámetro a una función flecha el error bueno Esto está mal porque se llama buo así puede ser esto está bien y ya simplemente pasarle a nuestra respuesta la respuesta fallida Aquí también podemos ponerle un Ahí está punto coma y
(40:37) return y listo no aquí podemos hacer lo mismo y qué más podemos hacer gracias Qué más le podemos hacer a nuestra a nuestra promesa Punto Final Exacto punto Finally y en Finally Oigan además Ah está bien Esto va entre llaves porque es una función flech entonces Finally respon respon función flecha Ah esta vez no no porque realidad no la tenemos no entonces response Ay en vez de esto se se terminó de de
(41:41) ejecutar nuestra promesa va Qué onda se sienten listos para hacer un un ejemplo más complicado Ah me falta algo aquí Ah ahí me ya me dijo Ahí está y esto termina el manejo de nuestra de nuestra promesa ahora simplemente podemos rechar response es este response no este Bueno vamos a cambiarle el nombre este va a ser Ah Vamos a ponerle a este n más este tampoco lo ocupo Finally ay no así y a este Vamos a ponerle otro nombre respuesta respuesta y respuesta para que se note que son
(42:44) distintos este response es este response y solo pertenece a este bloque esta respuesta solo pertenece a la función flecha de del den la misma y así podemos llamar a nuestra Api de acuerdo Entonces por ejemplo podemos llamar a la Api de Pokémon si se llama así alguien me pasa el link vamos a verlo en la presentación Ah cre que lo tengo aquí seg aquí también Andy lo hizo con vamos a llevarnos este de aquí así la misma y vamos a preguntar por dito qué opinan nos llevamos esto nos llevamos esto para allá para el
(43:52) navegador control sh c vamos a dar Clear vamos hacer más grande y listo Ah Todavía no termina de ejecutarse está en pending vamos a esperar que termine se terminó de ejecutar nuestra promesa Por qué Y por qué no nos dijo Ah Por qué nosotros Cambiamos no vamos a vamos a modificar tantito nuestro código para que en en Ajá vamos a mover aquí el den response Jon vamos a hacerle Así vamos a modificar tantito nuestro código regresamos acá Clear Ahora sí aj prom por Ah por solo está ejecutando el Finally
(45:09) no vamos a quitarle el Finally para que solo haga un error o faltó es no sé por qué no nos está regresando Oh creo que mi empresa lo tiene bloqueado a ver alguien puede ejecutar este código se los paso por el chat y que nos mande captura no o a ver Andy tanos parito a ver si funciona s es que me bloquean todo por igual este luego Google Chrome bloquea tambén
(46:15) o Entonces yo uso firf No mi empresa me bloquea todo es más vamos a buscar la de Pokémon Pokémon a ver si nos deja entrar desde Google enci me deja Vamos a darle subit subit subit pachu o si funciona no está bloqueada me pasa lo mismo me deja pegarlo el código error
(47:27) podemos hacer otra vamos a cambiar el el den vamos a hacer otro código para el den vamos a probar con Ah miren justo Aquí vamos a checarlo respon y resp eror encontrado esto lo quitamos No eso estaba esto Cerramos el den cerramos antes esto y ya vámonos a Aquí sí a ver Es que no entiendo [Música]
(48:39) vamos a ver si nos dice algo más a ver vamos a hacerlo así Sabes qué creo que es por el Catch porque se está asignando una una cadena del parámetro este error en lugar de manejar el error como c error respuesta fallida error Por qué no entendí Es que según yo primo tienes que ponerle en lugar de ig que son dos puntos Sí o sea es Catch error entre paréntesis el error entre paréntesis y luego abres llave y tienes que ponerle
(49:43) conso punto error y le pones error coma bueno error entre comillas luego coma error y ya después le pones return respuesta fallida es cons error O sea si funcionaba mi función as como estab y en ve y aparte buo segú yo tend que Déjate lo escribo en en el chat Así es conso error o sea es exo así y luego Ajá exacto y luego abajo dentro de la misma de la misma llave adentro eh return Y ya le pones respuesta
(50:50) fallida Así no porque es este error que me están mandando no ahí va Sí y si eso ya está bien según yo ver ya está función y ahora igual no otro nombre este Pokémon es igual Ai l Api y te voy a pasar esta URL no pero quiero a Pikachu Ay gey por Es que no entiendo por qué
(51:55) entonces lo me la rechazaron te paso una no sé si sirva este según yo tiene que ser me rechazaron la promesa te pasa en el ch Ay cabrón si me regresó a Pikachu miren si está Pikachu pero no sé por qué failure es es rechazado o no me acuerdo si es rechazado a ver ff a ver cómo dicef exao no me regresó la respuesta y mi respuesta
(53:00) fue exitosa miren ff es cumplida significa que la operación asíncrona se ha completado de manera exitosa aquí ya me dice promise State son los estados de promesa ya vi y podemos ver aquí todas las propiedades por ejemplo podemos preguntar vamos a ver como Cuál es el a podemos preguntar por pok abilities Clear miren Pokémons punto abilities abilities Ah si esto va bien A ver vamos a ver otra vez Pokémon Pokémons tiene Ah Pokémons Pokémons punto object punto object con mayúscula ahora sí no ninguna de
(54:15) estas sería punto No porque es una promesa o sea Pokémon es una promesa Pokémon es una promesa entonces tendrías que manejar La promesa Ah sí Pokémon pero pok es una promesa Pues eso dice la consola [Música] Pokémons funciona Ok O sea quiero entrar a esta propiedad
(55:30) Quiero entrar a esta propiedad [Música] abilities tampoco Ah cómo entro pok qu es Data bu es que según yo ahí accede directamente la propied
(56:50) objeto pero no está definido habil si lo estoy escribiendo bien habilit no el objeto será así no Ah no sé no sé cómo entrar es esa madre Lu investigar y se los paso la próxima clase no entiendo por qué bueno yo pondría como es que según yo es así con Data habili luego le pones ability info y ya sacas con la consola a ver a verja lo hag y
(58:05) pok Y si le pones punto den y en el argumento de den pones Data o bueno Cualquier parámetro y ya imprime lo que lo que te pase eso porque eso es una función no O sea Ajá Y eso lo puedes tendrías no sé en teoría imprimirlo no sé si sirve el que te pase sí no a huevo ese es un genio Data [Música] puntis fuerzas Ya lo tenemos aquí a ver ahora s vamos a quitar esto quitamos esto de aquí y hacemos for in Data habili a si es con dos puntos Cómo es
(59:13) en conso log Ah no me acuerdo es con dos puntos no es entre llaves es así [Música] me confundo bueno pero hay una forma el punto es que ya pudimos
(1:00:19) entrar dat y como es una promesa la tenemos que consumir como promesa va alguien tiene alguna duda est un poquito revuelto pero creo que se entendió noo alguien tiene alguna duda de cómo consumir las promesas yo no entiendo por qué la respuesta respon fue fue una promesa cuando se supone que debe haber sido Jason vamos a ver si podemos pasarlo a Jason tal vez ahí estuvo el J fun le puse paréntesis así
(1:01:57) así A ver no sé según yo tiene que ser con flecha o sea le pones resp y resp dat Data Jon no respons Bueno aquí le puse Data Ah ah cierto Ah Se supone que con eso Ah miren Ahora sí y y poké Ándele ah no pero lo sigue me lo sigue tratando como
(1:03:03) promesa a ver intenta haerle que te Porque según yo bueno bueno habría que investigar cómo pasar de promesa a Jason para poder consumirlo más fácil no O a objeto que es prácticamente lo mismo no muy bien mientras Vámonos Ahora sí con la última parte de de este de programación asíncrona que es Asia weit Asia wit son dos palabras claves esto ya no es un paradigma de programación no son funciones son palabras claves son palabras reservadas que nos ayudan a simplificar el manejo de la sincronía hacen que el código sea
(1:04:02) mucho más limpio legible etcétera no Y lo bueno primero asc lo usamos Al momento de declarar una función para hacer que esta función se vuelva asíncrona y automáticamente esta función nos va a devolver una promesa por lo que vamos a tener que manejar la respuesta como ya sabemos no con manejo de promesas y await es otra palabra palabra reservada que se utiliza dentro de una función asíncrona declarada como async para pausar la operación hasta que la promesa de dicha función se complete de manera exitosa o bueno se complete
(1:04:43) exitosa o fallida va y aquí vemos el ejemplo declaramos una función con la palabla reservada syc decimos aing function como ya sabemos declarar una función y dentro en alguna operación por ejemplo Aquí hacemos una operación lenta que esta operación puede ser la consulta una Api y manejamos eh su su resultado con una promesa como ya sabemos va está fácil no alguien tiene alguna duda Okay vamos a hacer un ejemplo no vamos a intentar hacer la mismo que hicimos hace un ratito con con la Api de Pokémon pero esta vez con
(1:05:44) Ay entonces hacemos asnc Ah miren por ejemplo aquí ya nos dio fch Pokémon vamos a cerrar nuestra llave y vamos a hacer try fetch Bueno sí vamos a hacerlo igual que arriba Ah No aquí no se hace así se hace así const Pokémon Pokémon es igual a Ahora sí una operación asíncrona entonces queremos que esto se se detenga el proceso hasta que complete la operación entonces podemos justo por ejemplo llamar a la Api a como ya lo hacíamos antes es más Aquí vamos a pasarle Bueno vamos a dejarlo así ya con pikacho cons Pokémon
(1:06:37) wait app y conso log ya no lo recomendó nuestro Pokémon Y ya y luego por otro lado hacemos Catch error y imprimimos el error y ya así de fácil fue manejar la sincronía simplificamos el código bueno a pesar de que la de arriba fue una operación asíncrona esta pudo haber sido cualquier otra cosa No necesitamos Llamar al Api no podamos por ejemplo aquí en vez de llam Api directamente hacer el fch fch URL URL F URL y aquí manejábamos de todo dos modos la La promesa aquí nos está mostrando esta forma pero nosotros no sabemos de
(1:07:33) eso nosotros vamos a hacerle Pokémon punto cómo se llamaba den aquí nos recomendó Esta cosa que ya sabemos que no sirve Entonces hacemos Data punto Ah vamos a consol bl Data Data Ajá Y por otro lado Ah lo estamos haciendo mal Esto va así así y luego por otro lado podemos Ah no es Catch imprimimos el error y Finally se termino de ejecutar nuestra promesa aquí nos está sobrando este y lo regresamos como una promesa este return Pokémon es nuestra promesa no y listo esta sería nuestra función quieren
(1:08:39) probarla vamos a irnos acá la consola vamos a hacer voy a hacer una nueva pestaña para que no nos esté mandando errores a cada rato y vamos a copiarnos esta de aquí Dónde está nuestra Dónde está nuestra URL aquí está y se llama F Pokémon y te pasamos la URL de Pikachu Okay no sé por qué nos mandó error bueno se llama Ah vamos a ver Pokémon es igual a f Pokémon Pikachu poké Pikachu por
(1:09:50) qué pero miren no sé por qué nos está mandando error y acá arriba dice que sí completó La promesa vamos a ver a Pokémon de nuevo es una promesa promise Ah pero no nos devolvió [Música] nada perdón me llegó un mensaje de mi jefe a ver qu está mal en nuestra función necesitas si lo quitas ya funciona Pero porque ya lo quitas porque estás manejando La promesa con den y lo manejando cones una de las
(1:10:52) dos pero o sea así esto también debería funcionar No sí a ver pues no yo digo que tengo que manejar esta promesa no porque a al hacer fch me está regresando una promesa no Enton la Entonces no no a ver tal si le quitamos así pero el error está en el no dice que un
(1:12:11) error un error Pero por qué dice que si la manejo bien Pikachu o sea esto Si yo le pongo aquí una Wi y esto a menos de que Pikachu pero sí estaba
(1:13:22) bien no creo que sí Si imprimes eso en la consola qué te da Es que además esto este este Pokémon es una promesa Entonces esta la tengo que manejar Sí o sí como promesa el que es promesa es Pikachu no a Pikachu es promesa Ajá porque a syn me regresa una promesa de hecho esto puede ser y tod me ahra un poquito más de código A ver vamos a manjar esto como promesa Data cons Data error promesa
(1:15:05) dice que se completó exitosamente pero por está bien pero creo queando La promesa deuel por laun Pikachu pero no estás esperando a que la promesa se resuelva Entonces es es cierto porque estoy en el a no Ajá entonces Pikachu te contiene una promesa En lugar de los datos reales Sí eso está bien Pero tienes razón en que estoy manejando La promesa aquí estoy manejando antes de que o sea eso tiene que ir abajo o sea
(1:16:09) Pikachu Pikachu parte Pikachu está mal escrito a ver veras Pero por qué dice que no es que es es la parte que no sé haces otra función a ver si vamos a llamar a llama Api con la URL así no también dice que está completada cuál otro Pokémon teníamos es que yo no sé de [Música]
(1:17:17) pokémones net error fail A ver pues vamos a ver la url no es que di está bien no más para no quedarme con la con la duda la madre a bueno en el cons pones Pikachu para las propiedades en el cons pones Pikachu para acceder a las
(1:18:23) propiedades aquí aj intento algo más va es que aj ten aquí mis anotaciones Ok va mis anotaciones dicen que hagamos un TR no me acuerdo por era esto luego en una constante podemos ahora s Hacer nuestro [Música] nuestra operación asíncrona URL Y si la respuesta tiene el estatus Ok también eso ya lo vieron en Cómo se llama en en métodos http todas las respuestas tienen estatus el 201 se refiere al Okay entonces este si el estatus no fue Ok
(1:19:31) entonces arrojamos error No Okay y después Else Y si la [Música] si Jon esto est simplemente el Ah no ahí y ahora vamos a manejar lación eror y ya nos recomienda aquí el error vamos a cerrar aquí y ya con eso quedaría sí Okay y Pikachu si hay que manejarlo como
(1:20:37) [Música] una como una promesa y Pikachu lo manejamos como promesa Pikachu type fail fch promise pending Ty error a Pokémon Ay Por qué es que yo digo que esto está mal
(1:21:41) manejado porque este es una promesa A ver vamos a preguntarle a este güey que no la const tiene que ser Pikachu missing keyword before the function cabrón terrible el internet a ver function literal hizo Exactamente lo
(1:22:45) mismo nada más le quito eljon esto no funciona hacemos caso en todos modos no Ah no sé por qué Y por qué esto sí funciona
(1:24:42) así miren tampoco me dejó Llamar la Api con llama Api miren Ya tampoco me deja con el código de hace rato a ver alguien puede intentarlo Creo que ahora sí es mi redc Bueno chicos creo que Andy tiene un ejemplo que el de ella sí funciona entonces creo que mejor le voy a dejar el micrófono a ella y les investigo por qué no funcionó mi función Bueno
(1:25:46) Este sí no sé si si quieran que les enseñe cómo funciona LP poké o paso directo como ustedes vean pensé que ya lo habías hecho perdóname No exp perd pensé que justo ese era pero no te preocupes ahorita o se si quieren se las bueno rápidamente si eh la interfaz está de pokeapi lo que nos permite a nosotros es acceder a un montón de información sobre Pokémon no y proporciona datos sobre cada Pokémon ya sea sus tipos habilidades estadísticas evoluciones etcétera y bueno algo que podemos hacer es acceder
(1:26:51) a datos detallados como por ejemplo tipos de Pokémon ya sea de agua fuego planta etcétera habilidades estadísticas de combate movimientos y bueno un montón de cosas que aquí también información de las evoluciones este movimientos y habilidades Bueno está muy bonita la verdad es que la vi me gustó bastante de hecho me gusta más que la de Marvel y bueno la ventaja de esto es que la estructura Entonces nos va a facilitar la manipulación y el uso en las aplicaciones web y también en los celulares Bueno cómo funciona funciona con solicitudes http
(1:27:39) eso ya lo sabemos e que bueno enviamos a urls específicas de la Api No que ya lo vimos con al ex eso y para obtener la información sobre un Pokémon pues simplemente hacemos una solicitud get y usamos la URL y justamente como lo hizo Alex que le puso al final Pikachu por ejemplo Así es como accedemos al al nombre del Pokémon o el ID y pues bueno básicamente así sirve les voy a pasar la página para que ustedes vean todo esto porque lo van a lo van a tener que ver para su tarea y bueno ahora s vamos vamos a pasar al
(1:28:27) ejemplo no tenemos nada per vamos rápido Vamos a ponerle aquí y vamos a ponerle que es nuestro link para nuestra referencia de nuestr SS estilo y también [Música] este bootstrap no voy a agarrar el que ya tengo aquí bien Ahora no sé si tengan alguna duda con con el con la estructura del código según yo ya vimos todo bien Igual con lai si tien alguna duda me
(1:29:32) dicen para empezar con el cuerpo teng no hay ninguna vamos a segir vamos a hacer vamos a poner la clase container que esto ya esot y aquí adentro vamos a poner otro div una razón se cerró pero
(1:30:38) bueno sí Qué tristeza s a ver que mandaron el Telegram sí no sé por qué pasó eso bueno or dic Ah claro No este lo estoy grabando con obs no se preocupen que por cierto me causó un problema es con con mi explorador de archivos guardé el el video y ya no podía abir explorado de archivos no sé por eso Pero bueno vamos a esperar tantito a que se una los dems mir aquí estoy grabando no bueno mientras no sé si tengan alguna duda de este de lo que sea bueno si no tienen dudas ahorita
(1:31:58) continúo me qued en el aquí no sé vamos a vamos a centrar todo esto se supone que ya lo sabemos no vamos a ponerle aquí otra clase el título 4 alguien se acuerda para qué era mb4 en bootstrap nadie bueno el mb4 es para
(1:33:11) el para el margen inferior el cu de las unidades no cu bien Ahora vamos a poner otro le vamos a poner un input que bueno tipo texto Vamos a ponerle un y acá vamos a ponerle Pokémon y nuestra [Música] clase le vamos a poner y uner que diga
(1:34:23) ID Lu Vamos a ponerle aquí un botón Vamos a ponerle un ID a este botón que sea Search Button una clase botón de bootstrap y un primary y Aquí vamos a ponerle Buscar y ahora sí para Mostrar la imagen Vamos a ponerle otro diy Dios Y en este di Vamos a ponerle un ID pokon
(1:35:29) info y una clase sea imagen imagen y este auto listo y ahora sí vamos a incluir nuestro archivo de javascript para eso ya saben scp aquí vamos a poner ponemos javascript Y también vamos a usar Aquí
(1:36:44) está listo vamos a correro cómo se ven bueno as se ve más o menos ahorita pasa nada bueno detil no s si no tiempo si me apuro tal [Aplausos] vez Body vamos a poner vamos poké as Vamos a ponerle una family roboto y vamos a
(1:37:52) ponerle de 50 píxeles puse acá Ah po imagen Pokémon [Música] Barrita acá le vamos a poner un borde de los píxeles que sea sólido vamos a poner bueno rojo y vamos a ponerle también Okay
(1:39:02) peles y el botón de se ve mejor y al container Vamos a ponerle color así ponemos también un radio y también 20 y que el margen sea bueno y más o menos se ve bien no ay sí ya sí no importa bueno ahora sí ya vamos con lo
(1:40:08) lo que debemos bien este Qué vamos a hacer Pues bueno vamos a definir una función asíncrona Ah le vamos a poner pok y ahora una constante ID bueno en s lo que lo que vamos a hacer con esta función asíncrona es función realice operaciones que puedan tardar en completarse no sabemos sin que se detenga la ejecución del resto de código entonces para eso vamos a usar el As y con esta vamos a poder emplear la palabra la palabra await dentro de la
(1:41:13) función para facilitar el manejo de las promesas Bueno aquí Vamos a ponerle Element [Música] by Vamos a ponerle aquí input y después Val que esto es para obtener el valor actual del campo de texto o sea lo que el usuario escribe [Música] no esto de lower No si algui es pero
(1:42:21) bueno va a convertir todo el texto a minúsculas justamente para asegurarnos de que la búsqueda no sea e no se afectada por las mayúsculas y minúsculas que escriba el usuario no no sé si sabían que eso existe y eh se usa muchísimo también y bueno este trim de aquí es para eliminar eh los espacios en blanco adicionales y pone el usuario al principio y al final del texto bien ya eso es para obtener el valor del campo de entrada y ahora vamos a verificar que el campo no esté vacío Enton vamos un Pokémon y vamos a ponerle una alerta No
(1:43:16) alerta vamos a poner ingresa un nombre ID válido escribo bien y excelente bueno no s si tengan alguna duda con eso en específico todo bien Vamos bien perdón si me estoy yendo muy rápido ahora vamos a intentar obtener los datos del Pokémon con [Música] entonces y vamos a comenzar el bloque con y ahora
(1:44:27) Vamos a ponerle la el ID no bueno el la URL ahora no sé si ustedes sepan qué es esto de aquí Alguien sabe qué es porque el signo de de pesos no bueno eh se le llama interpolación de cadenas no sé si lo han escuchado o template literals bueno e template literal no que es Sí justamente para variables para incluir variables o expresiones dentro de una cadena de texto y lo que hace es crear cadenas dinámicas Y esto es para que sea más más fácil No todo es lo que es [Música]
(1:45:41) Ah entonces no sé si tengan alguna duda de esto por ahora okay Para tod excelente ahora vamos a verificar si nuestra solicitud este pues ha sido exitosa no para esto vamos a hacer un If y response Okay y Aquí vamos eror Vamos a ponerle no se ha encontrado po
(1:46:52) bien vamos a ver si todo lo esty haciendo bien por si acaso según yo si está bien try bien Sí todo bien Ahora este vamos a poner Aquí vamos a poner response Jon para que nos nos convierta la respuesta de la Api en un objeto Jason y después display Pokémon image Data Esto es para llamar a la función de este display Pokémon image y va a pasar el objeto Data que contiene la información del Pokémon para que se
(1:47:56) muestre la imagen este en la página no Catch Esto es para el manejo de errores Ahora sí y vamos a aquí [Música] document Element ID y le vamos a poner Pokémon info Qué significa Inner html bueno en sí e el esto esto completo es para mostrar el mensaje de error no y es html porque pues ser de de tipo html ahorita van a ver por qué porque vamos a usar etiqueta
(1:49:08) tengo y Aquí vamos a ponerle desde adentro el estilo y vamos a ponerle un color así llamativo me parece que es color luego así creo segú y acá vamos a poner error dos puntos y el mensaje error message ya se cierra sí dos listo entonces pues ya Catch capturamos cualquier error que ocurra en
(1:50:15) este blo try Ya vimos que esto es para que muestre el mensaje de error en la página y error m no este mostramos el error de no se ha encontrado el Pokémon Y bueno ya por último display Pokémon image y ya es para que se nuestro Pokémon vamos aante y en esta conk y ahora vamos a tomarlo desde nuestro html no me acuerdo có le p
(1:51:25) Ah info y ahora sí vamos a crear el el contenido este html para la imagen entonces Pokémon html le vamos a poner aquí la imagen y para esto vamos a usar [Aplausos] etiquetad bien aquí Vamos a ponerle
(1:52:29) Pokémon punto spr [Aplausos] bien este qué hace esto Bueno accedemos a la URL de la imagen del Pokémon Y pues lo que va a hacer es insertar dinámicamente la URL de la imagen y el nombre del Pokémon en lo que es nuestro html es lo que
(1:53:38) hací no sé por qué me lo está marcando mal aquí según yo está bien Bueno ahorita vemos eso ahora eh vamos a insertar la imagen en el el contenedor y para hacer eso Pokémon sprites estoy haciendo este Pokémon info Perdón info y y bueno Esto va a ser para actualizar el contenido html del ya definimos html po y después vamos a
(1:54:47) agregar lo que es el botón de la búsqueda aquí le pusimos Y en este caso vamos hacerle bien este vamos a Añadir lo que es el cli para que ejecute Pokémon cuando se haga cuando el usuario ha ha c Y bueno según yo deber son está poniendo aquí algo extraño a
(1:55:57) ver la función eso está bien html Ah ya s Ah no s si sea el tipo de segú esta es la imagen desde
(1:57:09) arriba function Pokémon bien el campo de entrada que se vea bien y ahora la alerta mientras d si todo está bien mientras estoy buscando bien okay Si tienen alguna duda de lo que estoy haciendo también dicen o de algo de aquí de el manejo de errores o algo así function
(1:58:53) qué está pasando no s por Supongo que es un eror de sintaxis No si me puedan ayudar a ver en estoy mal segú aquí [Música] después de la comida y un salto de línea no según yo no es eso esa cosa que está no porque este justamente para la parte de html tiene que poner eh estas comitas No creo Cómo se
(1:59:57) llam por eso acá sí sirve estoy casi segura que es una llave Casi casi segura pero no la veo falta la no porque acuérdate que la etiqueta imagen no no se cierra obiamente no funcion
(2:01:05) este por qué A ver deeno trampa es que si está bien según yo las comillas son distintas si es cierto es cierto es muy cierto creo que sí Exacto Exacto justamente las comillas son diferentes al parecer Ay este son Ay Dios estas comillas yo dije si son estas comillas gracias gracias
(2:02:08) este perdónenme según yo ya y también las de las de acá son estas no me acuerdo cómo se llama este tipo de asento Alguien sabe me diga que no me acuerdo Okay segú Está igual no s es el mismo no Ah ya me falta una r
(2:03:17) aquí ye ya quedó Qué lindo Pikachu Ay no sé de Pokémon pero se supone que tiene que sí muestra var a ver díganme pokémones y no no pero que sean de Los Originales no Okay me van a decir unos bien reros Ay qué lindo no lo había visto nunca es un changuito Ah snorlax Oigan ya es bien tarde í sí lo conozco No me di cuenta de la hora pero bueno ya acabamos Pero me falta explicarle su tarea qué
(2:04:23) hacemos se quedan son como 5 minutos de explicar laa vemos si la tarea es individual Ay qué bonito entonces las explico rápido sí se las explico bueno de todos modos lo bueno de esto es que quedó grabado Entonces ustedes si se pueden Bueno si ya se tienen que ir este no hay problema Está grabado Así que pueden irse si no pues quédense y Bueno la verdad es que s está un poco más complicado la la tarea esta vez por eso les vamos a dar más tiempo y bueno qué vamos a querer
(2:05:29) e Cuál es el objetivo en sí de esta tarea y más que nada es que se amplíe la la aplicación que ya tenemos de de búsqueda de Pokémon e vamos a mejorar la funcionalidad para que se muestren más detalles sobre los pokémones Entonces vamos a implementar también eh un sistema de historial de búsquedas y vamos a Añadir la capacidad de limpiar tanto la información que se muestra y el historial no Bueno e para para mostrar por ejemplo la imagen este el nombre del Pokémon el ID los tipos etcétera pues vamos a usar los datos que
(2:06:22) ya tenemos disponibles en nuestra Api de Pokémon pues ya sabemos cómo se hace no es con nuestra URL le y le vamos a modificar la función este de display Pokémon image algo que pueden ustedes hacer es dejarla Así que muestre lo que es la imagen o quitársela si ustedes quieren también pueden hacerlo eh yo creo que se ve mejor que se quede no la la imagen em y pues ya en este caso para no sé para encontrar el nombre Alguien me puede decir cómo se puede encontrar el nombre del del Pokémon o el ID en su defecto así como lo vieron con Alex más
(2:07:18) o menos no bueno se puede hacer con Data punto name o data.id no el mismo casa para los tipos es Data type y bueno cada tipo tiene que estar dentro de un de una ary no y tenemos que extraer por ejemplo el type name y bueno también habilidades por ejemplo están en Data habili que también lo vimos y cada habilidad está dentro también de una array y también se tiene que extraer el ability name entonces un consejo que les doy Es que se aseguren de que toda la información que se muestre dentro del mismo
(2:08:22) que está en el html que se usa para la imagen de Pokémon pues este pues o sea tienen que asegurarse que toda esta información esté dentro de ese para que no aparezca literalmente para que no aparezca o sea es dentro de ese aquí no y bueno ahora por ejemplo para limpiar la información al hacer una nueva consulta eh antes de mostrar la información de un nuevo Pokémon tenemos que limpiar el dip donde se muestra la información cómo se puede hacer Pues por ejemplo modificamos la función que realiza la búsqueda para que primero
(2:09:09) borre el contenido del dip antes de agregar una nueva la nueva información entonces algo importante es que esta limpieza tiene que ocurrir de manera asíncrona o O sea que el área se tiene que limpiar mientras espera la nueva consulta para que la interfaz pues sea fluida no O sea para que no haga una cosa por Entonces ahí es donde tienen que usar el la no Y la ahora para implementar el historial de de búsqueda e de guardar y Mostrar el historial de búsqueda e tiene que ser que cada vez que el usuario busque El Pokémon que guarde el
(2:09:55) nombre del Pokémon en una rey y que muestre el historial debajo del área de resultados bueno eso ya se hizo no Entonces se crea el arrey para almacenar eh los nombres de los pokémones buscados y cada vez que se realice una búsqueda exitosa se va a agregar el el Pokémon al principio de la rey y Eh Pues no sé la recomendaciones que lo limiten a cinco búsquedas eliminando el elemento este más antiguo si se exen las cco y eh el historial en la página y bueno justamente debajo de la información del Pokémon lo que van a hacer es que se
(2:10:40) muestre el historial y pues no sé que sea interactivo no O sea que a la hora de que se haga clic en el nombre del historial se vuelva a buscar es ese Pokémon no sé si si me entiendan ahí si Según yo es claro no O sea que aparezca el el nombre le das click y que vuelva a buscarse es no está tan complicado según yo y bueno para el botón de limpieza pues simplemente es implementar un botón donde la información mostrada y también la el historial de búsqueda se limpie Entonces se crea un botón que diga limpiar o el
(2:11:31) de basurita o no sé ahí como ustedes vean [Música] e aparezca ahí no para que se borre entonces hacen clic y tanto la información del Pokémon como el historial de búsquedas se se borra y pues ya básicamente es es la la tarea y aquí está la el link está el ejemplo que acabamos de hacer para que tengan la guía Y pues ya y también asegúrense de probar cada parte de la aplicación a medida de que ustedes lo desarrollen O sea no hagan todo de una por ejemplo implementan lo del ID no lo del nombre Pues asegúrense que eso sirva porque si
(2:12:19) no les va a costar trabajo estarlo corrigiendo desde el principio entonces asegúrense de que funcione cada una de las cosas que hagan y pues ya este Eso es todo No no s si tengan alguna otra duda o algo así de todos modos e nos pueden preguntar por Telegram por classroom por correo donde ustedes quieran y ya eso eso es todo voy a detener la grabación aquí de obis a ver si no muere mi computadora por la grabación peroen este quedó bonita no la La cosa está Y bueno ya eso es todo No si tengan alguna duda de otra cosa algo más todo bien
(2:13:18) bueno va igual si necesitan más tiempo me dicen no hay ningún problema
